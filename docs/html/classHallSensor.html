<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Joint Level Control: HallSensor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Joint Level Control
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classHallSensor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">HallSensor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class abstracts the communication with the sensors measuring the state of the swingjoints.  
 <a href="classHallSensor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="hall__sensor_8h_source.html">hall_sensor.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac901b856eff0dffb4dfa5fdeaf888c4c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHallSensor.html#ac901b856eff0dffb4dfa5fdeaf888c4c">HallSensor</a> (const std::string &amp;spi_device, uint8_t spi_cs_id, uint8_t spi_mode, uint8_t spi_bits, uint32_t spi_speed, uint16_t spi_delay, double zero_point)</td></tr>
<tr class="memdesc:ac901b856eff0dffb4dfa5fdeaf888c4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor of the <a class="el" href="classHallSensor.html" title="This class abstracts the communication with the sensors measuring the state of the swingjoints...">HallSensor</a> class.  <a href="#ac901b856eff0dffb4dfa5fdeaf888c4c">More...</a><br /></td></tr>
<tr class="separator:ac901b856eff0dffb4dfa5fdeaf888c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eea1969e798bc786c5fa165aeb47c77"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHallSensor.html#a5eea1969e798bc786c5fa165aeb47c77">getValue</a> ()</td></tr>
<tr class="separator:a5eea1969e798bc786c5fa165aeb47c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac97079734e670ba56401e6a8b37144e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHallSensor.html#ac97079734e670ba56401e6a8b37144e8">setZeroPoint</a> ()</td></tr>
<tr class="separator:ac97079734e670ba56401e6a8b37144e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class abstracts the communication with the sensors measuring the state of the swingjoints. </p>
<p>The left and right swingsensor, measure the position the swingjoints. They are implemented using As5047D Hall Sensors as well as magnets attached to the output lever of the motor assembly (pictured below). </p><div class="image">
<img src="https://raw.githubusercontent.com/TriPed-Robot/Wiki/master/pictures/hardware/swing_sensor.png" alt="hall_sensor_placement"/>
</div>
<p> The magnets are affixed using 3d printed caps, which offer no way to predetermine the magnetic field at a given angle. This means that the sensor output which is initially in counts has to be calibrated. This is done either during initialization using the zero_point value or during runtime using the setZeroPoint method.</p>
<p>After initialization the sensors produce values in the range of [-pi,pi]. A angle of zero is specified as the angle at which the position of the output lever is perpendicular to the two mounting brackets of the hall sensor Because these mounting brackets constrict the movement output lever the actually achievable range of motion is [-pi/2,pi/2].</p>
<p>The embedded communication with the Sensor is done via SPI according to their datasheet. The connection of the sensor to the beaglebone can be seen in the s<a href="https://github.com/TriPed-Robot/Wiki/wiki/Wiring-diagram">wiring diagram</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac901b856eff0dffb4dfa5fdeaf888c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac901b856eff0dffb4dfa5fdeaf888c4c">&#9670;&nbsp;</a></span>HallSensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HallSensor::HallSensor </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>spi_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>spi_cs_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>spi_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>spi_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>spi_speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>spi_delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>zero_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor of the <a class="el" href="classHallSensor.html" title="This class abstracts the communication with the sensors measuring the state of the swingjoints...">HallSensor</a> class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SPI</td><td>device, Chip select ID, mode, number of bits, communication speed and delay as well as the angle which is considered zero by the kinematics. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5eea1969e798bc786c5fa165aeb47c77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eea1969e798bc786c5fa165aeb47c77">&#9670;&nbsp;</a></span>getValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double HallSensor::getValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the Angle of the <a class="el" href="classHallSensor.html" title="This class abstracts the communication with the sensors measuring the state of the swingjoints...">HallSensor</a> </p>

</div>
</div>
<a id="ac97079734e670ba56401e6a8b37144e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac97079734e670ba56401e6a8b37144e8">&#9670;&nbsp;</a></span>setZeroPoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HallSensor::setZeroPoint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the next Angle sent from the Sensor as new zeropoint for the angles. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="hall__sensor_8h_source.html">hall_sensor.h</a></li>
<li>hall_sensor.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
