\hypertarget{classHallSensor}{}\section{Hall\+Sensor Class Reference}
\label{classHallSensor}\index{Hall\+Sensor@{Hall\+Sensor}}


This class abstracts the communication with the sensors measuring the state of the swingjoints.  




{\ttfamily \#include $<$hall\+\_\+sensor.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classHallSensor_ac901b856eff0dffb4dfa5fdeaf888c4c}{Hall\+Sensor} (const std\+::string \&spi\+\_\+device, uint8\+\_\+t spi\+\_\+cs\+\_\+id, uint8\+\_\+t spi\+\_\+mode, uint8\+\_\+t spi\+\_\+bits, uint32\+\_\+t spi\+\_\+speed, uint16\+\_\+t spi\+\_\+delay, double zero\+\_\+point)
\begin{DoxyCompactList}\small\item\em Constructor of the \hyperlink{classHallSensor}{Hall\+Sensor} class. \end{DoxyCompactList}\item 
double \hyperlink{classHallSensor_a5eea1969e798bc786c5fa165aeb47c77}{get\+Value} ()
\begin{DoxyCompactList}\small\item\em Reads the Angle of the \hyperlink{classHallSensor}{Hall\+Sensor}. \end{DoxyCompactList}\item 
void \hyperlink{classHallSensor_ac97079734e670ba56401e6a8b37144e8}{set\+Zero\+Point} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class abstracts the communication with the sensors measuring the state of the swingjoints. 

The left and right swingsensor, measure the position the swingjoints. They are implemented using As5047D Hall Sensors as well as magnets attached to the output lever of the motor assembly (pictured below).  The magnets are affixed using 3d printed caps, which offer no way to predetermine the magnetic field at a given angle. This means that the sensor output which is initially in counts has to be calibrated. This is done either during initialization using the zero\+\_\+point value or during runtime using the set\+Zero\+Point method.

After initialization the sensors produce values in the range of \mbox{[}-\/pi,pi\mbox{]}. A angle of zero is specified as the angle at which the position of the output lever is perpendicular to the two mounting brackets of the hall sensor Because these mounting brackets constrict the movement output lever the actually achievable range of motion is \mbox{[}-\/pi/2,pi/2\mbox{]}.

The embedded communication with the Sensor is done via S\+PI according to their datasheet. The connection of the sensor to the beaglebone can be seen in the \href{https://triped-robot.github.io/docs/embedded/}{\tt wiring diagram}. 

\subsection{Constructor \& Destructor Documentation}
\index{Hall\+Sensor@{Hall\+Sensor}!Hall\+Sensor@{Hall\+Sensor}}
\index{Hall\+Sensor@{Hall\+Sensor}!Hall\+Sensor@{Hall\+Sensor}}
\subsubsection[{\texorpdfstring{Hall\+Sensor(const std\+::string \&spi\+\_\+device, uint8\+\_\+t spi\+\_\+cs\+\_\+id, uint8\+\_\+t spi\+\_\+mode, uint8\+\_\+t spi\+\_\+bits, uint32\+\_\+t spi\+\_\+speed, uint16\+\_\+t spi\+\_\+delay, double zero\+\_\+point)}{HallSensor(const std::string &spi_device, uint8_t spi_cs_id, uint8_t spi_mode, uint8_t spi_bits, uint32_t spi_speed, uint16_t spi_delay, double zero_point)}}]{\setlength{\rightskip}{0pt plus 5cm}Hall\+Sensor\+::\+Hall\+Sensor (
\begin{DoxyParamCaption}
\item[{const std\+::string \&}]{spi\+\_\+device, }
\item[{uint8\+\_\+t}]{spi\+\_\+cs\+\_\+id, }
\item[{uint8\+\_\+t}]{spi\+\_\+mode, }
\item[{uint8\+\_\+t}]{spi\+\_\+bits, }
\item[{uint32\+\_\+t}]{spi\+\_\+speed, }
\item[{uint16\+\_\+t}]{spi\+\_\+delay, }
\item[{double}]{zero\+\_\+point}
\end{DoxyParamCaption}
)}\hypertarget{classHallSensor_ac901b856eff0dffb4dfa5fdeaf888c4c}{}\label{classHallSensor_ac901b856eff0dffb4dfa5fdeaf888c4c}


Constructor of the \hyperlink{classHallSensor}{Hall\+Sensor} class. 


\begin{DoxyParams}{Parameters}
{\em S\+PI} & device, Chip select ID, mode, number of bits, communication speed and delay as well as the angle which is considered zero by the kinematics. \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\index{Hall\+Sensor@{Hall\+Sensor}!get\+Value@{get\+Value}}
\index{get\+Value@{get\+Value}!Hall\+Sensor@{Hall\+Sensor}}
\subsubsection[{\texorpdfstring{get\+Value()}{getValue()}}]{\setlength{\rightskip}{0pt plus 5cm}double Hall\+Sensor\+::get\+Value (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classHallSensor_a5eea1969e798bc786c5fa165aeb47c77}{}\label{classHallSensor_a5eea1969e798bc786c5fa165aeb47c77}


Reads the Angle of the \hyperlink{classHallSensor}{Hall\+Sensor}. 

This function returns a double containing the current Angle of the joint according to the angle specifications above. \index{Hall\+Sensor@{Hall\+Sensor}!set\+Zero\+Point@{set\+Zero\+Point}}
\index{set\+Zero\+Point@{set\+Zero\+Point}!Hall\+Sensor@{Hall\+Sensor}}
\subsubsection[{\texorpdfstring{set\+Zero\+Point()}{setZeroPoint()}}]{\setlength{\rightskip}{0pt plus 5cm}void Hall\+Sensor\+::set\+Zero\+Point (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classHallSensor_ac97079734e670ba56401e6a8b37144e8}{}\label{classHallSensor_ac97079734e670ba56401e6a8b37144e8}
Sets the next Angle sent from the Sensor as the new zero\+\_\+point\+\_\+ for the angles. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
hall\+\_\+sensor.\+h\item 
hall\+\_\+sensor.\+cpp\end{DoxyCompactItemize}
